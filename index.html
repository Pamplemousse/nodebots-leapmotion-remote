<!doctype html>
<html lang="en">
	<head>
		<title>NodeBot leapmotion remote</title>
		<meta charset="utf-8">
		<style>
			body {
				font-family: Monospace;
				margin: 0px;
        padding: 0;
			}

		</style>

    <script src="//js.leapmotion.com/leap-0.6.4.min.js"></script>
    <script src="js/leap-plugins-0.1.11pre.js"></script>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.1.0/lodash.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/4.0.7/rx.all.js"></script>
	</head>

	<body>
    later, there will be useful debug informations
	</body>

  <script>

    var frames = [];

    var frameChanges$ = Rx.Observable.ofArrayChanges(frames);
    var lastFrames$ = frameChanges$
      .map(function(frameChange) {
        return _.last(frameChange.object);
      });

    var controller = Leap.loop({ enableGestures:true }, function(frame) {
      frames.push(frame);
    });

    var hands$ = lastFrames$
      .filter(function(frame) {
        return !_.isEmpty(frame.hands)
      })
      .map(function(frame) {
        return frame.hands[0];
      });

    hands$.subscribe(
       function(hand) {
         console.log(hand);
       }
    )

  </script>
</html>
